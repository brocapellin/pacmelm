<!DOCTYPE HTML>
<html><head><meta charset="UTF-8"><title>Main</title><script type="text/javascript" src="resources/elm-runtime-0.12.3.js"></script><script type="text/javascript">Elm.Main = Elm.Main || {};
Elm.Main.make = function (_elm) {
   "use strict";
   _elm.Main = _elm.Main || {};
   if (_elm.Main.values)
   return _elm.Main.values;
   var _N = Elm.Native,
   _U = _N.Utils.make(_elm),
   _L = _N.List.make(_elm),
   _A = _N.Array.make(_elm),
   _E = _N.Error.make(_elm),
   $moduleName = "Main";
   var Basics = Elm.Basics.make(_elm);
   var Color = Elm.Color.make(_elm);
   var Gfx = Elm.Gfx.make(_elm);
   var Graphics = Graphics || {};
   Graphics.Collage = Elm.Graphics.Collage.make(_elm);
   var Graphics = Graphics || {};
   Graphics.Element = Elm.Graphics.Element.make(_elm);
   var List = Elm.List.make(_elm);
   var Maybe = Elm.Maybe.make(_elm);
   var Native = Native || {};
   Native.Json = Elm.Native.Json.make(_elm);
   var Native = Native || {};
   Native.Ports = Elm.Native.Ports.make(_elm);
   var Signal = Elm.Signal.make(_elm);
   var String = Elm.String.make(_elm);
   var Text = Elm.Text.make(_elm);
   var Time = Elm.Time.make(_elm);
   var Window = Elm.Window.make(_elm);
   var World = Elm.World.make(_elm);
   var _op = {};
   var main = A2(Signal._op["~"],
   A2(Signal._op["<~"],
   Gfx.renderResult,
   Window.dimensions),
   World.world);
   _elm.Main.values = {_op: _op
                      ,main: main};
   return _elm.Main.values;
};Elm.Gfx = Elm.Gfx || {};
Elm.Gfx.make = function (_elm) {
   "use strict";
   _elm.Gfx = _elm.Gfx || {};
   if (_elm.Gfx.values)
   return _elm.Gfx.values;
   var _N = Elm.Native,
   _U = _N.Utils.make(_elm),
   _L = _N.List.make(_elm),
   _A = _N.Array.make(_elm),
   _E = _N.Error.make(_elm),
   $moduleName = "Gfx";
   var Axis = Elm.Axis.make(_elm);
   var Basics = Elm.Basics.make(_elm);
   var Color = Elm.Color.make(_elm);
   var Graphics = Graphics || {};
   Graphics.Collage = Elm.Graphics.Collage.make(_elm);
   var Graphics = Graphics || {};
   Graphics.Element = Elm.Graphics.Element.make(_elm);
   var LineSegment = Elm.LineSegment.make(_elm);
   var List = Elm.List.make(_elm);
   var Maybe = Elm.Maybe.make(_elm);
   var Native = Native || {};
   Native.Json = Elm.Native.Json.make(_elm);
   var Native = Native || {};
   Native.Ports = Elm.Native.Ports.make(_elm);
   var Orientation = Elm.Orientation.make(_elm);
   var Pacman = Elm.Pacman.make(_elm);
   var Point = Elm.Point.make(_elm);
   var Signal = Elm.Signal.make(_elm);
   var String = Elm.String.make(_elm);
   var Text = Elm.Text.make(_elm);
   var Time = Elm.Time.make(_elm);
   var World = Elm.World.make(_elm);
   var _op = {};
   var score = F3(function (w,
   h,
   state) {
      return Graphics.Collage.toForm(A3(Graphics.Element.container,
      w,
      h,
      Graphics.Element.topLeft)(Text.leftAligned(Text.bold(Text.color(Color.yellow)(Text.toText(String.show(state.score)))))));
   });
   var fmod = F2(function (x,y) {
      return x - Basics.toFloat(Basics.floor(x / y)) * y;
   });
   var toPixels = function (units) {
      return 16.4 * units;
   };
   var levelPart = function (segment) {
      return function () {
         var $ = function () {
            var _v0 = segment.axis;
            switch (_v0.ctor)
            {case "X":
               return {ctor: "_Tuple2"
                      ,_0: segment.start.x + segment.length * 0.5
                      ,_1: segment.start.y};
               case "Y":
               return {ctor: "_Tuple2"
                      ,_0: segment.start.x
                      ,_1: segment.start.y + segment.length * 0.5};}
            _E.Case($moduleName,
            "between lines 92 and 101");
         }(),
         x = $._0,
         y = $._1;
         var part = function () {
            var _v1 = segment.axis;
            switch (_v1.ctor)
            {case "X":
               return A2(Graphics.Collage.rect,
                 toPixels(segment.length),
                 1.0);
               case "Y":
               return A2(Graphics.Collage.rect,
                 1.0,
                 toPixels(segment.length));}
            _E.Case($moduleName,
            "between lines 88 and 92");
         }();
         return Graphics.Collage.move({ctor: "_Tuple2"
                                      ,_0: toPixels(x)
                                      ,_1: toPixels(y)})(Graphics.Collage.filled(Color.gray)(part));
      }();
   };
   var pacman = function (state) {
      return function () {
         var eatingSpeed = 0.4;
         var halfMouthSize = 0.6;
         var bodySize = toPixels(Pacman.size);
         var mouthEnds = A2(fmod,
         state.worldTime,
         eatingSpeed) * halfMouthSize / eatingSpeed * bodySize;
         var rotation = function () {
            var _v2 = state.pacman.orientation;
            switch (_v2.ctor)
            {case "East": return 180;
               case "North": return 270;
               case "South": return 90;
               case "West": return 0;}
            _E.Case($moduleName,
            "between lines 60 and 66");
         }();
         var mouth = Graphics.Collage.filled(Color.black)(Graphics.Collage.polygon(_L.fromArray([{ctor: "_Tuple2"
                                                                                                 ,_0: (0 - bodySize) * 0.6
                                                                                                 ,_1: mouthEnds}
                                                                                                ,{ctor: "_Tuple2"
                                                                                                 ,_0: (0 - bodySize) * 0.6
                                                                                                 ,_1: 0 - mouthEnds}
                                                                                                ,{ctor: "_Tuple2"
                                                                                                 ,_0: bodySize * 0.25
                                                                                                 ,_1: 0.0}])));
         var body = Graphics.Collage.filled(Color.lightYellow)(Graphics.Collage.circle(bodySize * 0.5));
         return Graphics.Collage.rotate(Basics.degrees(rotation))(Graphics.Collage.move({ctor: "_Tuple2"
                                                                                        ,_0: toPixels(state.pacman.position.x)
                                                                                        ,_1: toPixels(state.pacman.position.y)})(Graphics.Collage.group(_L.fromArray([body
                                                                                                                                                                     ,mouth]))));
      }();
   };
   var treasure = function (state) {
      return function () {
         var display = function (t) {
            return Graphics.Collage.move({ctor: "_Tuple2"
                                         ,_0: toPixels(t.position.x)
                                         ,_1: toPixels(t.position.y)})(Graphics.Collage.filled(Color.white)(Graphics.Collage.circle(toPixels(5.0e-2))));
         };
         return A2(List.map,
         display,
         state.treasure);
      }();
   };
   var resultObjects = F3(function (windowWidth,
   windowHeight,
   state) {
      return function () {
         var background = Graphics.Collage.group(_L.fromArray([Graphics.Collage.filled(Color.black)(A2(Graphics.Collage.rect,
                                                              Basics.toFloat(windowWidth),
                                                              Basics.toFloat(windowHeight)))
                                                              ,Graphics.Collage.toForm(A3(Graphics.Element.fittedImage,
                                                              462,
                                                              511,
                                                              "resources/level.png"))]));
         return _L.append(_L.fromArray([background]),
         _L.append(treasure(state),
         _L.append(_L.fromArray([pacman(state)]),
         _L.fromArray([A3(score,
         windowWidth,
         windowHeight,
         state)]))));
      }();
   });
   var renderResult = F2(function (_v3,
   state) {
      return function () {
         switch (_v3.ctor)
         {case "_Tuple2":
            return A2(Graphics.Collage.collage,
              _v3._0,
              _v3._1)(A3(resultObjects,
              _v3._0,
              _v3._1,
              state));}
         _E.Case($moduleName,
         "between lines 22 and 23");
      }();
   });
   _elm.Gfx.values = {_op: _op
                     ,renderResult: renderResult
                     ,resultObjects: resultObjects
                     ,treasure: treasure
                     ,pacman: pacman
                     ,toPixels: toPixels
                     ,fmod: fmod
                     ,levelPart: levelPart
                     ,score: score};
   return _elm.Gfx.values;
};Elm.World = Elm.World || {};
Elm.World.make = function (_elm) {
   "use strict";
   _elm.World = _elm.World || {};
   if (_elm.World.values)
   return _elm.World.values;
   var _N = Elm.Native,
   _U = _N.Utils.make(_elm),
   _L = _N.List.make(_elm),
   _A = _N.Array.make(_elm),
   _E = _N.Error.make(_elm),
   $moduleName = "World";
   var Axis = Elm.Axis.make(_elm);
   var Basics = Elm.Basics.make(_elm);
   var Circle = Elm.Circle.make(_elm);
   var Color = Elm.Color.make(_elm);
   var Graphics = Graphics || {};
   Graphics.Collage = Elm.Graphics.Collage.make(_elm);
   var Graphics = Graphics || {};
   Graphics.Element = Elm.Graphics.Element.make(_elm);
   var Input = Elm.Input.make(_elm);
   var LineSegment = Elm.LineSegment.make(_elm);
   var List = Elm.List.make(_elm);
   var Maybe = Elm.Maybe.make(_elm);
   var Native = Native || {};
   Native.Json = Elm.Native.Json.make(_elm);
   var Native = Native || {};
   Native.Ports = Elm.Native.Ports.make(_elm);
   var Orientation = Elm.Orientation.make(_elm);
   var Pacman = Elm.Pacman.make(_elm);
   var Point = Elm.Point.make(_elm);
   var Portal = Elm.Portal.make(_elm);
   var Signal = Elm.Signal.make(_elm);
   var String = Elm.String.make(_elm);
   var Text = Elm.Text.make(_elm);
   var Time = Elm.Time.make(_elm);
   var Treasure = Elm.Treasure.make(_elm);
   var WorldTime = Elm.WorldTime.make(_elm);
   var _op = {};
   var axisFromOrientation = function (orientation) {
      return function () {
         switch (orientation.ctor)
         {case "East": return Axis.X;
            case "West": return Axis.X;}
         return Axis.Y;
      }();
   };
   var portals = _L.fromArray([A3(Portal.portal,
                              0.1,
                              A2(Point.point,-14.5,1.0),
                              A2(Point.point,13.5,1.0))
                              ,A3(Portal.portal,
                              0.1,
                              A2(Point.point,14.5,1.0),
                              A2(Point.point,-13.5,1.0))]);
   var warp = Portal.warp(portals);
   var pathSegmentsLeft = _L.fromArray([A3(LineSegment.lineSegment,
                                       A2(Point.point,-12.5,-14.0),
                                       3.0,
                                       Axis.Y)
                                       ,A3(LineSegment.lineSegment,
                                       A2(Point.point,-1.5,-14.0),
                                       3.0,
                                       Axis.Y)
                                       ,A3(LineSegment.lineSegment,
                                       A2(Point.point,-12.5,-11.0),
                                       5.0,
                                       Axis.X)
                                       ,A3(LineSegment.lineSegment,
                                       A2(Point.point,-4.5,-11.0),
                                       3.0,
                                       Axis.X)
                                       ,A3(LineSegment.lineSegment,
                                       A2(Point.point,-10.5,-11.0),
                                       3.0,
                                       Axis.Y)
                                       ,A3(LineSegment.lineSegment,
                                       A2(Point.point,-7.5,-11.0),
                                       25.0,
                                       Axis.Y)
                                       ,A3(LineSegment.lineSegment,
                                       A2(Point.point,-4.5,-11.0),
                                       3.0,
                                       Axis.Y)
                                       ,A3(LineSegment.lineSegment,
                                       A2(Point.point,-12.5,-8.0),
                                       2.0,
                                       Axis.X)
                                       ,A3(LineSegment.lineSegment,
                                       A2(Point.point,-12.5,-8.0),
                                       3.0,
                                       Axis.Y)
                                       ,A3(LineSegment.lineSegment,
                                       A2(Point.point,-1.5,-8.0),
                                       3.0,
                                       Axis.Y)
                                       ,A3(LineSegment.lineSegment,
                                       A2(Point.point,-12.5,-5.0),
                                       11.0,
                                       Axis.X)
                                       ,A3(LineSegment.lineSegment,
                                       A2(Point.point,-4.5,-5.0),
                                       9.0,
                                       Axis.Y)
                                       ,A3(LineSegment.lineSegment,
                                       A2(Point.point,-14.5,1.0),
                                       10.0,
                                       Axis.X)
                                       ,A3(LineSegment.lineSegment,
                                       A2(Point.point,-1.5,4.0),
                                       3.0,
                                       Axis.Y)
                                       ,A3(LineSegment.lineSegment,
                                       A2(Point.point,-12.5,7.0),
                                       5.0,
                                       Axis.X)
                                       ,A3(LineSegment.lineSegment,
                                       A2(Point.point,-4.5,7.0),
                                       3.0,
                                       Axis.X)
                                       ,A3(LineSegment.lineSegment,
                                       A2(Point.point,-12.5,7.0),
                                       7.0,
                                       Axis.Y)
                                       ,A3(LineSegment.lineSegment,
                                       A2(Point.point,-4.5,7.0),
                                       3.0,
                                       Axis.Y)
                                       ,A3(LineSegment.lineSegment,
                                       A2(Point.point,-1.5,10.0),
                                       4.0,
                                       Axis.Y)
                                       ,A3(LineSegment.lineSegment,
                                       A2(Point.point,-12.5,14.0),
                                       11.0,
                                       Axis.X)]);
   var pathSegments = _L.append(_L.fromArray([A3(LineSegment.lineSegment,
                                             A2(Point.point,-12.5,-14.0),
                                             25.0,
                                             Axis.X)
                                             ,A3(LineSegment.lineSegment,
                                             A2(Point.point,-7.5,-8.0),
                                             15.0,
                                             Axis.X)
                                             ,A3(LineSegment.lineSegment,
                                             A2(Point.point,-4.5,-2.0),
                                             9.0,
                                             Axis.X)
                                             ,A3(LineSegment.lineSegment,
                                             A2(Point.point,-4.5,4.0),
                                             9.0,
                                             Axis.X)
                                             ,A3(LineSegment.lineSegment,
                                             A2(Point.point,-12.5,10.0),
                                             25.0,
                                             Axis.X)]),
   _L.append(pathSegmentsLeft,
   A2(List.map,
   LineSegment.mirrorInX,
   pathSegmentsLeft)));
   var treasurePathSegmentsLeft = _L.fromArray([A3(LineSegment.lineSegment,
                                               A2(Point.point,-12.5,-14.0),
                                               12.0,
                                               Axis.X)
                                               ,A3(LineSegment.lineSegment,
                                               A2(Point.point,-12.5,-13.0),
                                               2.0,
                                               Axis.Y)
                                               ,A3(LineSegment.lineSegment,
                                               A2(Point.point,-1.5,-13.0),
                                               2.0,
                                               Axis.Y)
                                               ,A3(LineSegment.lineSegment,
                                               A2(Point.point,-11.5,-11.0),
                                               4.0,
                                               Axis.X)
                                               ,A3(LineSegment.lineSegment,
                                               A2(Point.point,-4.5,-11.0),
                                               2.0,
                                               Axis.X)
                                               ,A3(LineSegment.lineSegment,
                                               A2(Point.point,-10.5,-10.0),
                                               2.0,
                                               Axis.Y)
                                               ,A3(LineSegment.lineSegment,
                                               A2(Point.point,-7.5,-10.0),
                                               24.0,
                                               Axis.Y)
                                               ,A3(LineSegment.lineSegment,
                                               A2(Point.point,-4.5,-10.0),
                                               2.0,
                                               Axis.Y)
                                               ,A3(LineSegment.lineSegment,
                                               A2(Point.point,-11.5,-8.0),
                                               0.0,
                                               Axis.X)
                                               ,A3(LineSegment.lineSegment,
                                               A2(Point.point,-6.5,-8.0),
                                               1.0,
                                               Axis.X)
                                               ,A3(LineSegment.lineSegment,
                                               A2(Point.point,-3.5,-8.0),
                                               2.0,
                                               Axis.X)
                                               ,A3(LineSegment.lineSegment,
                                               A2(Point.point,-12.5,-7.0),
                                               2.0,
                                               Axis.Y)
                                               ,A3(LineSegment.lineSegment,
                                               A2(Point.point,-1.5,-7.0),
                                               2.0,
                                               Axis.Y)
                                               ,A3(LineSegment.lineSegment,
                                               A2(Point.point,-11.5,-5.0),
                                               3.0,
                                               Axis.X)
                                               ,A3(LineSegment.lineSegment,
                                               A2(Point.point,-6.5,-5.0),
                                               4.0,
                                               Axis.X)
                                               ,A3(LineSegment.lineSegment,
                                               A2(Point.point,-12.5,7.0),
                                               4.0,
                                               Axis.X)
                                               ,A3(LineSegment.lineSegment,
                                               A2(Point.point,-4.5,7.0),
                                               3.0,
                                               Axis.X)
                                               ,A3(LineSegment.lineSegment,
                                               A2(Point.point,-12.5,8.0),
                                               3.0,
                                               Axis.Y)
                                               ,A3(LineSegment.lineSegment,
                                               A2(Point.point,-4.5,8.0),
                                               2.0,
                                               Axis.Y)
                                               ,A3(LineSegment.lineSegment,
                                               A2(Point.point,-11.5,10.0),
                                               3.0,
                                               Axis.X)
                                               ,A3(LineSegment.lineSegment,
                                               A2(Point.point,-6.5,10.0),
                                               1.0,
                                               Axis.X)
                                               ,A3(LineSegment.lineSegment,
                                               A2(Point.point,-3.5,10.0),
                                               3.0,
                                               Axis.X)
                                               ,A3(LineSegment.lineSegment,
                                               A2(Point.point,-12.5,13.0),
                                               1.0,
                                               Axis.Y)
                                               ,A3(LineSegment.lineSegment,
                                               A2(Point.point,-1.5,11.0),
                                               3.0,
                                               Axis.Y)
                                               ,A3(LineSegment.lineSegment,
                                               A2(Point.point,-11.5,14.0),
                                               3.0,
                                               Axis.X)
                                               ,A3(LineSegment.lineSegment,
                                               A2(Point.point,-6.5,14.0),
                                               4.0,
                                               Axis.X)]);
   var treasurePathSegments = _L.append(treasurePathSegmentsLeft,
   A2(List.map,
   LineSegment.mirrorInX,
   treasurePathSegmentsLeft));
   var constrainToPath = F2(function (orientation,
   point) {
      return function () {
         var sortByDistance = List.sortBy(Basics.fst);
         var withinRange = List.filter(function (_v1) {
            return function () {
               switch (_v1.ctor)
               {case "_Tuple2":
                  return _U.cmp(_v1._0,
                    Pacman.size) < 1;}
               _E.Case($moduleName,
               "on line 159, column 27 to 43");
            }();
         });
         var axisOrientation = axisFromOrientation(orientation);
         var sameAxis = List.filter(function (_v5) {
            return function () {
               switch (_v5.ctor)
               {case "_Tuple2":
                  return _U.eq(_v5._1.axis,
                    axisOrientation);}
               _E.Case($moduleName,
               "on line 156, column 27 to 52");
            }();
         });
         var distancePoint = LineSegment.distancePoint(point);
         var withDistance = List.map(function (l) {
            return {ctor: "_Tuple2"
                   ,_0: distancePoint(l)
                   ,_1: l};
         });
         var allSortedByDistance = function ($) {
            return sortByDistance(withDistance($));
         }(pathSegments);
         var priorityPaths = function ($) {
            return withinRange(sameAxis($));
         }(allSortedByDistance);
         var target = function ($) {
            return Basics.snd(List.head($));
         }(_L.append(priorityPaths,
         allSortedByDistance));
         return A2(LineSegment.constrain,
         point,
         target);
      }();
   });
   var treasure = function (state) {
      return function () {
         var collide = function (t) {
            return A2(Circle.intersectsPoint,
            A2(Circle.circle,
            state.pacman.position,
            Pacman.size * 0.5),
            t.position);
         };
         var $ = A2(List.partition,
         collide,
         state.treasure),
         colliding = $._0,
         remaining = $._1;
         var points = function ($) {
            return List.sum(List.map(Treasure.points)($));
         }(colliding);
         return _U.replace([["treasure"
                            ,remaining]
                           ,["score"
                            ,state.score + points]],
         state);
      }();
   };
   var positions = function (state) {
      return function () {
         var velocity = 0.3;
         var orientation = state.pacman.orientation;
         var newPosition = function ($) {
            return warp(constrainToPath(orientation)($));
         }(A2(Point.point,
         state.pacman.position.x + state.input.move.x * velocity,
         state.pacman.position.y + state.input.move.y * velocity));
         return _U.replace([["pacman"
                            ,A2(Pacman.position,
                            state.pacman,
                            newPosition)]],
         state);
      }();
   };
   var orientations = function (state) {
      return function () {
         var newOrientation = function () {
            var _v9 = Orientation.fromPoint(state.input.move);
            switch (_v9.ctor)
            {case "Just": return _v9._0;}
            return state.pacman.orientation;
         }();
         return _U.replace([["pacman"
                            ,A2(Pacman.orient,
                            state.pacman,
                            newOrientation)]],
         state);
      }();
   };
   var forces = F2(function (moment,
   state) {
      return _U.replace([["worldTime"
                         ,A2(WorldTime.newState,
                         moment.worldTime,
                         state.worldTime)]
                        ,["input"
                         ,A2(Input.newState,
                         moment.input,
                         state.input)]],
      state);
   });
   var newState = function (moment) {
      return function ($) {
         return treasure(positions(orientations(forces(moment)($))));
      };
   };
   var moment = function () {
      var combine = F2(function (worldTime,
      input) {
         return {_: {}
                ,input: Input.captureMoment(input)
                ,worldTime: WorldTime.captureMoment(worldTime)};
      });
      return A2(Signal._op["~"],
      A2(Signal._op["<~"],
      combine,
      WorldTime.moment),
      Input.moment);
   }();
   var Moment = F2(function (a,b) {
      return {_: {}
             ,input: b
             ,worldTime: a};
   });
   var initialState = {_: {}
                      ,input: Input.initialState
                      ,pacman: A2(Pacman.pacman,
                      A2(Point.point,0.0,0.0),
                      Orientation.West)
                      ,score: 0
                      ,treasure: Treasure.initialState(treasurePathSegments)
                      ,worldTime: WorldTime.initialState};
   var State = F5(function (a,
   b,
   c,
   d,
   e) {
      return {_: {}
             ,input: b
             ,pacman: a
             ,score: e
             ,treasure: d
             ,worldTime: c};
   });
   var world = A3(Signal.foldp,
   newState,
   initialState,
   moment);
   _elm.World.values = {_op: _op
                       ,world: world
                       ,initialState: initialState
                       ,moment: moment
                       ,newState: newState
                       ,forces: forces
                       ,orientations: orientations
                       ,positions: positions
                       ,treasure: treasure
                       ,constrainToPath: constrainToPath
                       ,treasurePathSegmentsLeft: treasurePathSegmentsLeft
                       ,treasurePathSegments: treasurePathSegments
                       ,pathSegments: pathSegments
                       ,pathSegmentsLeft: pathSegmentsLeft
                       ,warp: warp
                       ,portals: portals
                       ,axisFromOrientation: axisFromOrientation
                       ,State: State
                       ,Moment: Moment};
   return _elm.World.values;
};Elm.Treasure = Elm.Treasure || {};
Elm.Treasure.make = function (_elm) {
   "use strict";
   _elm.Treasure = _elm.Treasure || {};
   if (_elm.Treasure.values)
   return _elm.Treasure.values;
   var _N = Elm.Native,
   _U = _N.Utils.make(_elm),
   _L = _N.List.make(_elm),
   _A = _N.Array.make(_elm),
   _E = _N.Error.make(_elm),
   $moduleName = "Treasure";
   var Axis = Elm.Axis.make(_elm);
   var Basics = Elm.Basics.make(_elm);
   var Color = Elm.Color.make(_elm);
   var Graphics = Graphics || {};
   Graphics.Collage = Elm.Graphics.Collage.make(_elm);
   var Graphics = Graphics || {};
   Graphics.Element = Elm.Graphics.Element.make(_elm);
   var LineSegment = Elm.LineSegment.make(_elm);
   var List = Elm.List.make(_elm);
   var Maybe = Elm.Maybe.make(_elm);
   var Native = Native || {};
   Native.Json = Elm.Native.Json.make(_elm);
   var Native = Native || {};
   Native.Ports = Elm.Native.Ports.make(_elm);
   var Point = Elm.Point.make(_elm);
   var Signal = Elm.Signal.make(_elm);
   var String = Elm.String.make(_elm);
   var Text = Elm.Text.make(_elm);
   var Time = Elm.Time.make(_elm);
   var _op = {};
   var treasure = F2(function (kind,
   position) {
      return {_: {}
             ,kind: kind
             ,position: position};
   });
   var generateTreasure = F3(function (kind,
   unit,
   lineSegment) {
      return function () {
         var points = A2(LineSegment.sample,
         unit,
         lineSegment);
         return A2(List.map,
         treasure(kind),
         points);
      }();
   });
   var Treasure = F2(function (a,
   b) {
      return {_: {}
             ,kind: b
             ,position: a};
   });
   var Cherry = {ctor: "Cherry"};
   var Normal = {ctor: "Normal"};
   var points = function (t) {
      return function () {
         var _v0 = t.kind;
         switch (_v0.ctor)
         {case "Cherry": return 100;
            case "Normal": return 10;}
         _E.Case($moduleName,
         "between lines 26 and 28");
      }();
   };
   var initialState = List.concatMap(A2(generateTreasure,
   Normal,
   1.0));
   _elm.Treasure.values = {_op: _op
                          ,treasure: treasure
                          ,points: points
                          ,initialState: initialState
                          ,generateTreasure: generateTreasure
                          ,Normal: Normal
                          ,Cherry: Cherry
                          ,Treasure: Treasure};
   return _elm.Treasure.values;
};Elm.LineSegment = Elm.LineSegment || {};
Elm.LineSegment.make = function (_elm) {
   "use strict";
   _elm.LineSegment = _elm.LineSegment || {};
   if (_elm.LineSegment.values)
   return _elm.LineSegment.values;
   var _N = Elm.Native,
   _U = _N.Utils.make(_elm),
   _L = _N.List.make(_elm),
   _A = _N.Array.make(_elm),
   _E = _N.Error.make(_elm),
   $moduleName = "LineSegment";
   var Axis = Elm.Axis.make(_elm);
   var Basics = Elm.Basics.make(_elm);
   var Color = Elm.Color.make(_elm);
   var Graphics = Graphics || {};
   Graphics.Collage = Elm.Graphics.Collage.make(_elm);
   var Graphics = Graphics || {};
   Graphics.Element = Elm.Graphics.Element.make(_elm);
   var List = Elm.List.make(_elm);
   var Maybe = Elm.Maybe.make(_elm);
   var Native = Native || {};
   Native.Json = Elm.Native.Json.make(_elm);
   var Native = Native || {};
   Native.Ports = Elm.Native.Ports.make(_elm);
   var Point = Elm.Point.make(_elm);
   var Signal = Elm.Signal.make(_elm);
   var String = Elm.String.make(_elm);
   var Text = Elm.Text.make(_elm);
   var Time = Elm.Time.make(_elm);
   var _op = {};
   var range = F3(function (step,
   start,
   end) {
      return _U.cmp(start,
      end) > 0 ? _L.fromArray([]) : {ctor: "::"
                                    ,_0: start
                                    ,_1: A3(range,
                                    step,
                                    start + step,
                                    end)};
   });
   var sample = F2(function (unit,
   lineSegment) {
      return function () {
         var axis = lineSegment.axis;
         var start = function () {
            switch (axis.ctor)
            {case "X":
               return lineSegment.start.x;}
            return lineSegment.start.y;
         }();
         var partialPoints = A3(range,
         unit,
         start,
         start + lineSegment.length);
         var toPoint = function (partialPoint) {
            return function () {
               switch (axis.ctor)
               {case "Y":
                  return A2(Point.point,
                    lineSegment.start.x,
                    partialPoint);}
               return A2(Point.point,
               partialPoint,
               lineSegment.start.y);
            }();
         };
         return A2(List.map,
         toPoint,
         partialPoints);
      }();
   });
   var mirrorInX = function (lineSegment) {
      return _U.replace([["start"
                         ,function () {
                            var _v2 = lineSegment.axis;
                            switch (_v2.ctor)
                            {case "X":
                               return A2(Point.point,
                                 0 - (lineSegment.start.x + lineSegment.length),
                                 lineSegment.start.y);
                               case "Y":
                               return Point.mirrorInX(lineSegment.start);}
                            _E.Case($moduleName,
                            "between lines 33 and 39");
                         }()]],
      lineSegment);
   };
   var mirror = function (lineSegment) {
      return _U.replace([["start"
                         ,Point.mirror(lineSegment.start)]
                        ,["axis"
                         ,Axis.mirror(lineSegment.axis)]],
      lineSegment);
   };
   var distancePoint = F2(function (point,
   lineSegment) {
      return function () {
         var s = lineSegment;
         var se = s.start.x + s.length;
         var p = point;
         var disty = Basics.abs(p.y - s.start.y);
         var distx = _U.cmp(p.x,
         s.start.x) > -1 && _U.cmp(p.x,
         se) < 1 ? 0.0 : A2(Basics.min,
         Basics.abs(p.x - s.start.x),
         Basics.abs(p.x - se));
         return function () {
            var _v3 = lineSegment.axis;
            switch (_v3.ctor)
            {case "Y":
               return A2(distancePoint,
                 Point.mirror(point),
                 mirror(lineSegment));}
            return Basics.sqrt(Math.pow(distx,
            2.0) + Math.pow(disty,2.0));
         }();
      }();
   });
   var constrain = F2(function (point,
   lineSegment) {
      return function () {
         var s = lineSegment;
         var p = point;
         return function () {
            var _v4 = lineSegment.axis;
            switch (_v4.ctor)
            {case "Y":
               return Point.mirror(A2(constrain,
                 Point.mirror(p),
                 mirror(s)));}
            return A2(Point.point,
            function ($) {
               return Basics.max(s.start.x)(Basics.min(p.x)($));
            }(s.start.x + s.length),
            s.start.y);
         }();
      }();
   });
   var lineSegment = F3(function (start,
   length,
   axis) {
      return {_: {}
             ,axis: axis
             ,length: length
             ,start: start};
   });
   var LineSegment = F3(function (a,
   b,
   c) {
      return {_: {}
             ,axis: c
             ,length: b
             ,start: a};
   });
   _elm.LineSegment.values = {_op: _op
                             ,lineSegment: lineSegment
                             ,mirror: mirror
                             ,mirrorInX: mirrorInX
                             ,distancePoint: distancePoint
                             ,constrain: constrain
                             ,sample: sample
                             ,range: range
                             ,LineSegment: LineSegment};
   return _elm.LineSegment.values;
};Elm.Axis = Elm.Axis || {};
Elm.Axis.make = function (_elm) {
   "use strict";
   _elm.Axis = _elm.Axis || {};
   if (_elm.Axis.values)
   return _elm.Axis.values;
   var _N = Elm.Native,
   _U = _N.Utils.make(_elm),
   _L = _N.List.make(_elm),
   _A = _N.Array.make(_elm),
   _E = _N.Error.make(_elm),
   $moduleName = "Axis";
   var Basics = Elm.Basics.make(_elm);
   var Color = Elm.Color.make(_elm);
   var Graphics = Graphics || {};
   Graphics.Collage = Elm.Graphics.Collage.make(_elm);
   var Graphics = Graphics || {};
   Graphics.Element = Elm.Graphics.Element.make(_elm);
   var List = Elm.List.make(_elm);
   var Maybe = Elm.Maybe.make(_elm);
   var Native = Native || {};
   Native.Json = Elm.Native.Json.make(_elm);
   var Native = Native || {};
   Native.Ports = Elm.Native.Ports.make(_elm);
   var Signal = Elm.Signal.make(_elm);
   var String = Elm.String.make(_elm);
   var Text = Elm.Text.make(_elm);
   var Time = Elm.Time.make(_elm);
   var _op = {};
   var Y = {ctor: "Y"};
   var X = {ctor: "X"};
   var mirror = function (axis) {
      return _U.eq(axis,X) ? Y : X;
   };
   _elm.Axis.values = {_op: _op
                      ,mirror: mirror
                      ,X: X
                      ,Y: Y};
   return _elm.Axis.values;
};Elm.Portal = Elm.Portal || {};
Elm.Portal.make = function (_elm) {
   "use strict";
   _elm.Portal = _elm.Portal || {};
   if (_elm.Portal.values)
   return _elm.Portal.values;
   var _N = Elm.Native,
   _U = _N.Utils.make(_elm),
   _L = _N.List.make(_elm),
   _A = _N.Array.make(_elm),
   _E = _N.Error.make(_elm),
   $moduleName = "Portal";
   var Basics = Elm.Basics.make(_elm);
   var Circle = Elm.Circle.make(_elm);
   var Color = Elm.Color.make(_elm);
   var Graphics = Graphics || {};
   Graphics.Collage = Elm.Graphics.Collage.make(_elm);
   var Graphics = Graphics || {};
   Graphics.Element = Elm.Graphics.Element.make(_elm);
   var List = Elm.List.make(_elm);
   var Maybe = Elm.Maybe.make(_elm);
   var Native = Native || {};
   Native.Json = Elm.Native.Json.make(_elm);
   var Native = Native || {};
   Native.Ports = Elm.Native.Ports.make(_elm);
   var Point = Elm.Point.make(_elm);
   var Signal = Elm.Signal.make(_elm);
   var String = Elm.String.make(_elm);
   var Text = Elm.Text.make(_elm);
   var Time = Elm.Time.make(_elm);
   var _op = {};
   var fmap = F2(function (a,fs) {
      return function () {
         var as$ = A2(List.repeat,
         List.length(fs),
         a);
         return A3(List.zipWith,
         F2(function (f,a) {
            return f(a);
         }),
         fs,
         as$);
      }();
   });
   var portal = F4(function (radius,
   a,
   b,
   c) {
      return A2(Circle.intersectsPoint,
      A2(Circle.circle,c,radius),
      a) ? Maybe.Just(b) : Maybe.Nothing;
   });
   var warp = F2(function (portals,
   a) {
      return function () {
         var portals$ = _L.append(portals,
         _L.fromArray([A3(portal,
         1.0e-2,
         a,
         a)]));
         return List.head(Maybe.justs(A2(fmap,
         a,
         portals$)));
      }();
   });
   _elm.Portal.values = {_op: _op
                        ,portal: portal
                        ,warp: warp
                        ,fmap: fmap};
   return _elm.Portal.values;
};Elm.Circle = Elm.Circle || {};
Elm.Circle.make = function (_elm) {
   "use strict";
   _elm.Circle = _elm.Circle || {};
   if (_elm.Circle.values)
   return _elm.Circle.values;
   var _N = Elm.Native,
   _U = _N.Utils.make(_elm),
   _L = _N.List.make(_elm),
   _A = _N.Array.make(_elm),
   _E = _N.Error.make(_elm),
   $moduleName = "Circle";
   var Basics = Elm.Basics.make(_elm);
   var Color = Elm.Color.make(_elm);
   var Graphics = Graphics || {};
   Graphics.Collage = Elm.Graphics.Collage.make(_elm);
   var Graphics = Graphics || {};
   Graphics.Element = Elm.Graphics.Element.make(_elm);
   var List = Elm.List.make(_elm);
   var Maybe = Elm.Maybe.make(_elm);
   var Native = Native || {};
   Native.Json = Elm.Native.Json.make(_elm);
   var Native = Native || {};
   Native.Ports = Elm.Native.Ports.make(_elm);
   var Point = Elm.Point.make(_elm);
   var Signal = Elm.Signal.make(_elm);
   var String = Elm.String.make(_elm);
   var Text = Elm.Text.make(_elm);
   var Time = Elm.Time.make(_elm);
   var _op = {};
   var intersectsPoint = F2(function (circle,
   point) {
      return _U.cmp(A2(Point.distance,
      circle.origin,
      point),
      circle.radius) < 1;
   });
   var circle = F2(function (origin,
   radius) {
      return {_: {}
             ,origin: origin
             ,radius: radius};
   });
   var Circle = F2(function (a,b) {
      return {_: {}
             ,origin: a
             ,radius: b};
   });
   _elm.Circle.values = {_op: _op
                        ,circle: circle
                        ,intersectsPoint: intersectsPoint
                        ,Circle: Circle};
   return _elm.Circle.values;
};Elm.Input = Elm.Input || {};
Elm.Input.make = function (_elm) {
   "use strict";
   _elm.Input = _elm.Input || {};
   if (_elm.Input.values)
   return _elm.Input.values;
   var _N = Elm.Native,
   _U = _N.Utils.make(_elm),
   _L = _N.List.make(_elm),
   _A = _N.Array.make(_elm),
   _E = _N.Error.make(_elm),
   $moduleName = "Input";
   var Basics = Elm.Basics.make(_elm);
   var Color = Elm.Color.make(_elm);
   var Graphics = Graphics || {};
   Graphics.Collage = Elm.Graphics.Collage.make(_elm);
   var Graphics = Graphics || {};
   Graphics.Element = Elm.Graphics.Element.make(_elm);
   var Keyboard = Elm.Keyboard.make(_elm);
   var List = Elm.List.make(_elm);
   var Maybe = Elm.Maybe.make(_elm);
   var Native = Native || {};
   Native.Json = Elm.Native.Json.make(_elm);
   var Native = Native || {};
   Native.Ports = Elm.Native.Ports.make(_elm);
   var Point = Elm.Point.make(_elm);
   var Signal = Elm.Signal.make(_elm);
   var String = Elm.String.make(_elm);
   var Text = Elm.Text.make(_elm);
   var Time = Elm.Time.make(_elm);
   var _op = {};
   var newState = F2(function (moment,
   state) {
      return function () {
         var $ = _U.eq(moment.wasd.x,
         state.wasd.x) && _U.eq(moment.wasd.y,
         state.wasd.y) || _U.eq(moment.wasd.x,
         0) && _U.eq(moment.wasd.y,
         0) ? {ctor: "_Tuple2"
              ,_0: state.move.x
              ,_1: state.move.y} : _U.eq(moment.wasd.x,
         0) || _U.eq(moment.wasd.y,
         0) ? {ctor: "_Tuple2"
              ,_0: Basics.toFloat(moment.wasd.x)
              ,_1: Basics.toFloat(moment.wasd.y)} : _U.eq(state.move.x,
         0) ? {ctor: "_Tuple2"
              ,_0: Basics.toFloat(moment.wasd.x)
              ,_1: 0.0} : {ctor: "_Tuple2"
                          ,_0: 0.0
                          ,_1: Basics.toFloat(moment.wasd.y)},
         moveX = $._0,
         moveY = $._1;
         var move$ = state.move;
         var wasd$ = state.wasd;
         return {_: {}
                ,move: A2(Point.point,
                moveX,
                moveY)
                ,wasd: moment.wasd};
      }();
   });
   var captureMoment = function (wasd) {
      return {_: {},wasd: wasd};
   };
   var Moment = function (a) {
      return {_: {},wasd: a};
   };
   var moment = Keyboard.wasd;
   var initialState = {_: {}
                      ,move: A2(Point.point,0.0,0.0)
                      ,wasd: {_: {},x: 0,y: 0}};
   var State = F2(function (a,b) {
      return {_: {}
             ,move: b
             ,wasd: a};
   });
   _elm.Input.values = {_op: _op
                       ,initialState: initialState
                       ,moment: moment
                       ,captureMoment: captureMoment
                       ,newState: newState
                       ,State: State
                       ,Moment: Moment};
   return _elm.Input.values;
};Elm.Pacman = Elm.Pacman || {};
Elm.Pacman.make = function (_elm) {
   "use strict";
   _elm.Pacman = _elm.Pacman || {};
   if (_elm.Pacman.values)
   return _elm.Pacman.values;
   var _N = Elm.Native,
   _U = _N.Utils.make(_elm),
   _L = _N.List.make(_elm),
   _A = _N.Array.make(_elm),
   _E = _N.Error.make(_elm),
   $moduleName = "Pacman";
   var Basics = Elm.Basics.make(_elm);
   var Color = Elm.Color.make(_elm);
   var Graphics = Graphics || {};
   Graphics.Collage = Elm.Graphics.Collage.make(_elm);
   var Graphics = Graphics || {};
   Graphics.Element = Elm.Graphics.Element.make(_elm);
   var List = Elm.List.make(_elm);
   var Maybe = Elm.Maybe.make(_elm);
   var Native = Native || {};
   Native.Json = Elm.Native.Json.make(_elm);
   var Native = Native || {};
   Native.Ports = Elm.Native.Ports.make(_elm);
   var Orientation = Elm.Orientation.make(_elm);
   var Point = Elm.Point.make(_elm);
   var Signal = Elm.Signal.make(_elm);
   var String = Elm.String.make(_elm);
   var Text = Elm.Text.make(_elm);
   var Time = Elm.Time.make(_elm);
   var _op = {};
   var position = F2(function (pacman,
   position) {
      return _U.replace([["position"
                         ,position]],
      pacman);
   });
   var orient = F2(function (pacman,
   orientation) {
      return _U.replace([["orientation"
                         ,orientation]],
      pacman);
   });
   var pacman = F2(function (position,
   orientation) {
      return {_: {}
             ,orientation: orientation
             ,position: position};
   });
   var size = 1.5;
   var Pacman = F2(function (a,b) {
      return {_: {}
             ,orientation: b
             ,position: a};
   });
   _elm.Pacman.values = {_op: _op
                        ,size: size
                        ,pacman: pacman
                        ,orient: orient
                        ,position: position
                        ,Pacman: Pacman};
   return _elm.Pacman.values;
};Elm.Orientation = Elm.Orientation || {};
Elm.Orientation.make = function (_elm) {
   "use strict";
   _elm.Orientation = _elm.Orientation || {};
   if (_elm.Orientation.values)
   return _elm.Orientation.values;
   var _N = Elm.Native,
   _U = _N.Utils.make(_elm),
   _L = _N.List.make(_elm),
   _A = _N.Array.make(_elm),
   _E = _N.Error.make(_elm),
   $moduleName = "Orientation";
   var Basics = Elm.Basics.make(_elm);
   var Color = Elm.Color.make(_elm);
   var Graphics = Graphics || {};
   Graphics.Collage = Elm.Graphics.Collage.make(_elm);
   var Graphics = Graphics || {};
   Graphics.Element = Elm.Graphics.Element.make(_elm);
   var List = Elm.List.make(_elm);
   var Maybe = Elm.Maybe.make(_elm);
   var Native = Native || {};
   Native.Json = Elm.Native.Json.make(_elm);
   var Native = Native || {};
   Native.Ports = Elm.Native.Ports.make(_elm);
   var Point = Elm.Point.make(_elm);
   var Signal = Elm.Signal.make(_elm);
   var String = Elm.String.make(_elm);
   var Text = Elm.Text.make(_elm);
   var Time = Elm.Time.make(_elm);
   var _op = {};
   var West = {ctor: "West"};
   var South = {ctor: "South"};
   var East = {ctor: "East"};
   var North = {ctor: "North"};
   var fromPoint = function (point) {
      return _U.cmp(point.y,
      0.0) > 0 ? Maybe.Just(North) : _U.cmp(point.y,
      0.0) < 0 ? Maybe.Just(South) : _U.cmp(point.x,
      0.0) > 0 ? Maybe.Just(East) : _U.cmp(point.x,
      0.0) < 0 ? Maybe.Just(West) : Maybe.Nothing;
   };
   _elm.Orientation.values = {_op: _op
                             ,fromPoint: fromPoint
                             ,North: North
                             ,East: East
                             ,South: South
                             ,West: West};
   return _elm.Orientation.values;
};Elm.Point = Elm.Point || {};
Elm.Point.make = function (_elm) {
   "use strict";
   _elm.Point = _elm.Point || {};
   if (_elm.Point.values)
   return _elm.Point.values;
   var _N = Elm.Native,
   _U = _N.Utils.make(_elm),
   _L = _N.List.make(_elm),
   _A = _N.Array.make(_elm),
   _E = _N.Error.make(_elm),
   $moduleName = "Point";
   var Basics = Elm.Basics.make(_elm);
   var Color = Elm.Color.make(_elm);
   var Graphics = Graphics || {};
   Graphics.Collage = Elm.Graphics.Collage.make(_elm);
   var Graphics = Graphics || {};
   Graphics.Element = Elm.Graphics.Element.make(_elm);
   var List = Elm.List.make(_elm);
   var Maybe = Elm.Maybe.make(_elm);
   var Native = Native || {};
   Native.Json = Elm.Native.Json.make(_elm);
   var Native = Native || {};
   Native.Ports = Elm.Native.Ports.make(_elm);
   var Signal = Elm.Signal.make(_elm);
   var String = Elm.String.make(_elm);
   var Text = Elm.Text.make(_elm);
   var Time = Elm.Time.make(_elm);
   var _op = {};
   var mirrorInX = function (p) {
      return _U.replace([["x"
                         ,0 - p.x]],
      p);
   };
   var mirror = function (p) {
      return {_: {},x: p.y,y: p.x};
   };
   var distance = F2(function (p1,
   p2) {
      return Basics.sqrt(Math.pow(Basics.abs(p1.x - p2.x),
      2.0) + Math.pow(Basics.abs(p1.y - p2.y),
      2.0));
   });
   var point = F2(function (x,y) {
      return {_: {},x: x,y: y};
   });
   var Point = F2(function (a,b) {
      return {_: {},x: a,y: b};
   });
   _elm.Point.values = {_op: _op
                       ,point: point
                       ,distance: distance
                       ,mirror: mirror
                       ,mirrorInX: mirrorInX
                       ,Point: Point};
   return _elm.Point.values;
};Elm.WorldTime = Elm.WorldTime || {};
Elm.WorldTime.make = function (_elm) {
   "use strict";
   _elm.WorldTime = _elm.WorldTime || {};
   if (_elm.WorldTime.values)
   return _elm.WorldTime.values;
   var _N = Elm.Native,
   _U = _N.Utils.make(_elm),
   _L = _N.List.make(_elm),
   _A = _N.Array.make(_elm),
   _E = _N.Error.make(_elm),
   $moduleName = "WorldTime";
   var Basics = Elm.Basics.make(_elm);
   var Color = Elm.Color.make(_elm);
   var Graphics = Graphics || {};
   Graphics.Collage = Elm.Graphics.Collage.make(_elm);
   var Graphics = Graphics || {};
   Graphics.Element = Elm.Graphics.Element.make(_elm);
   var List = Elm.List.make(_elm);
   var Maybe = Elm.Maybe.make(_elm);
   var Native = Native || {};
   Native.Json = Elm.Native.Json.make(_elm);
   var Native = Native || {};
   Native.Ports = Elm.Native.Ports.make(_elm);
   var Signal = Elm.Signal.make(_elm);
   var String = Elm.String.make(_elm);
   var Text = Elm.Text.make(_elm);
   var Time = Elm.Time.make(_elm);
   var _op = {};
   var newState = F2(function (moment,
   state) {
      return state + Time.inSeconds(moment.timeDelta);
   });
   var captureMoment = function (timeDelta) {
      return {_: {}
             ,timeDelta: timeDelta};
   };
   var Moment = function (a) {
      return {_: {},timeDelta: a};
   };
   var moment = Time.fps(25);
   var initialState = 0.0;
   _elm.WorldTime.values = {_op: _op
                           ,initialState: initialState
                           ,moment: moment
                           ,captureMoment: captureMoment
                           ,newState: newState
                           ,Moment: Moment};
   return _elm.WorldTime.values;
};</script></head><body><script type="text/javascript">Elm.fullscreen(Elm.Main)</script><noscript></noscript></body></html>